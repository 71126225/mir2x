AUX_SOURCE_DIRECTORY(. CLIENT_SRC)
ADD_EXECUTABLE(client ${CLIENT_SRC})
ADD_DEPENDENCIES(client mir2x_3rds)

TARGET_INCLUDE_DIRECTORIES(client PRIVATE ${MIR2X_COMMON_SOURCE_DIR})

TARGET_LINK_LIBRARIES(client
    ${G3LOG_LIBRARIES}
    ${TINYXML2_LIBRARIES}
    ${CMAKE_DL_LIBS}

    common

    SDL2_ttf
    SDL2_gfx
    SDL2_image
    SDL2_mixer

    ${LUA_LIBRARIES}
    ${CMAKE_DL_LIBS}
    ${LZ4_LIBRARIES}
    ${ZSTD_LIBRARIES}
    ${LIBPINYIN_LIBRARIES}

    Threads::Threads)

IF(WIN32)
    TARGET_LINK_LIBRARIES(client SDL2::SDL2main SDL2::SDL2-static)
    TARGET_LINK_LIBRARIES(client ${FREETYPE_LIBRARIES})
ELSE()
    TARGET_LINK_LIBRARIES(client ${SDL2_LIBRARIES})
ENDIF()

INSTALL(TARGETS client DESTINATION client)
INSTALL(DIRECTORY ${CMAKE_SOURCE_DIR}/client/bin/res DESTINATION client)
INSTALL(FILES ${CMAKE_SOURCE_DIR}/client/bin/configuration.xml DESTINATION client)
INSTALL(DIRECTORY ${MIR2X_3RD_PARTY_DIR}/libpinyin/build/install/share/libpinyin DESTINATION client)
